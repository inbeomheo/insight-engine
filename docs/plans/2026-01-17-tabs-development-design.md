# History/Usage 탭 개발 설계

## 개요

아이콘 바의 History, Usage 탭 기능을 구현한다. 탭 클릭 시 결과 패널 영역이 해당 뷰로 전환된다.

---

## 전체 구조

```
┌──────┬─────────────────────┬───────────────────────────┐
│아이콘│     입력 패널        │       결과 패널            │
│ 바   │      (40%)          │        (60%)              │
│      │                     │                           │
│ 🏠   │  (입력 폼 유지)      │  [Dashboard] 리포트 카드   │
│ 📜   │                     │  [History]  히스토리 목록  │
│ 📊   │                     │  [Usage]    사용량 통계    │
│ ⚙️   │                     │                           │
└──────┴─────────────────────┴───────────────────────────┘
```

- **Dashboard**: 리포트 카드 표시 (기존)
- **History**: 결과 패널이 히스토리 목록으로 전환
- **Usage**: 결과 패널이 사용량 대시보드로 전환
- **Settings**: 기존 모달 유지
- 입력 패널은 **항상 고정**

---

## History 패널

### 레이아웃

```
┌─────────────────────────────────────────────────────┐
│ 📜 히스토리                        [전체 삭제] 🗑️   │
├─────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────┐ │
│ │ ▶ Blog • Gemini 2.5 Flash           3분 전  🗑️ │ │
│ │   "AI 기술의 미래: 2025년 전망"                  │ │
│ │   youtube.com/watch?v=abc123                    │ │
│ │   AI 기술이 급속도로 발전하면서...              │ │
│ └─────────────────────────────────────────────────┘ │
│                      ...                            │
├─────────────────────────────────────────────────────┤
│ 총 15개 항목 • 최대 50개 저장                       │
└─────────────────────────────────────────────────────┘
```

### 항목 정보

- 스타일 라벨 + AI 모델 + 생성 시간 + 삭제 버튼
- 제목
- URL (축약)
- 미리보기 텍스트 (2줄, 100자)

### 인터랙션

- **항목 클릭**: Dashboard로 전환, 해당 콘텐츠를 결과 패널에 표시 (펼친 상태)
- **삭제 버튼**: 해당 항목만 삭제
- **전체 삭제**: 확인 다이얼로그 후 모두 삭제

### 데이터 소스

- localStorage `cad_history_v1` (StorageManager.getHistory())

---

## Usage 패널

### 레이아웃

```
┌─────────────────────────────────────────────────────┐
│ 📊 사용량                                           │
├─────────────────────────────────────────────────────┤
│  ┌───────────────────────────────────────────────┐  │
│  │  오늘 사용량                                  │  │
│  │  ████████████░░░░░░░░  3 / 5                  │  │
│  │                        남은 횟수: 2회          │  │
│  └───────────────────────────────────────────────┘  │
│                                                     │
│  ┌───────────────────────────────────────────────┐  │
│  │  최근 7일 사용량                              │  │
│  │  5 ┤      ██                                  │  │
│  │  4 ┤  ██  ██                                  │  │
│  │  3 ┤  ██  ██  ██      ██                      │  │
│  │  2 ┤  ██  ██  ██  ██  ██                      │  │
│  │  1 ┤  ██  ██  ██  ██  ██  ██                  │  │
│  │    └──월──화──수──목──금──토──일──            │  │
│  └───────────────────────────────────────────────┘  │
│                                                     │
│  ┌───────────────────────────────────────────────┐  │
│  │  스타일별 사용 통계                           │  │
│  │  Blog     ████████████████  45%  (18회)       │  │
│  │  Summary  ████████          25%  (10회)       │  │
│  │  Detail   ██████            15%   (6회)       │  │
│  │  기타     ██████            15%   (6회)       │  │
│  └───────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────┘
```

### 섹션

1. **오늘 사용량**: 프로그레스 바 + 사용/한도 + 남은 횟수
2. **최근 7일 그래프**: CSS 바 차트
3. **스타일별 통계**: 가로 바 차트 + 퍼센트 + 횟수

### 데이터 소스

- 오늘 사용량: `GET /api/user/usage`
- 7일/스타일 통계: localStorage 히스토리에서 계산

---

## 탭 전환 동작

### Dashboard 클릭
- 아이콘 바: Dashboard 활성화
- 입력 패널: 유지
- 결과 패널: 리포트 카드 표시 (report-stream)

### History 클릭
- 아이콘 바: History 활성화
- 입력 패널: 유지
- 결과 패널: 히스토리 목록으로 전환

### Usage 클릭
- 아이콘 바: Usage 활성화
- 입력 패널: 유지
- 결과 패널: 사용량 대시보드로 전환

### Settings 클릭
- 모달 열기 (기존 동작 유지)

### History 항목 클릭
1. 해당 콘텐츠를 리포트 카드로 생성
2. Dashboard 탭으로 자동 전환
3. 결과 패널에 해당 카드 표시 (펼친 상태)

---

## 구현 방식

### HTML 구조

```html
<div id="result-panel">
    <!-- Dashboard View (기존) -->
    <div id="dashboard-view" class="panel-view active">
        <div id="report-stream">...</div>
        <div id="empty-state">...</div>
    </div>

    <!-- History View (신규) -->
    <div id="history-view" class="panel-view hidden">
        <!-- 히스토리 목록 -->
    </div>

    <!-- Usage View (신규) -->
    <div id="usage-view" class="panel-view hidden">
        <!-- 사용량 대시보드 -->
    </div>
</div>
```

### JavaScript

- 탭 클릭 이벤트: 해당 뷰만 표시, 나머지 숨김
- HistoryManager 또는 ReportManager 확장
- UsageManager 신규 모듈 (또는 인라인)

### CSS

- `.panel-view.hidden { display: none; }`
- 차트는 CSS만으로 구현 (라이브러리 없음)
